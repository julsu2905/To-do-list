<script>
const todoInput = document.querySelector('.todo-input');
const todoButtonNew = document.querySelector('.todo-button-new');
const todoList = document.querySelector('.todo-list');
//

//
const todoInput3 = document.querySelector('.todo-input3');
const todoList3 = document.querySelector('.todo-list3');


//event

if(todoButtonNew)
todoButtonNew.addEventListener('click',addTodo);

//delete
if(todoList)
todoList.addEventListener('click',deleteCheck);
if(todoList3)
todoList3.addEventListener('click',deleteCheck_Finish);
//
function addTodo(event){
    event.preventDefault();
  
    //todoDiv
    const todoDiv = document.createElement("div");
    const box = document.createAttribute("id");
    const drag = document.createAttribute("draggable");
    const dragstart = document.createAttribute("ondragstart");
    drag.value = "true";
    box.value = "drag1";
    dragstart.value = "drag(event)"
    todoDiv.classList.add("todo");
    todoDiv.setAttributeNode(box);
    todoDiv.setAttributeNode(drag);
    todoDiv.setAttributeNode(dragstart);
    
    //create Li
    const newTodo = document.createElement("li");
    newTodo.innerText = todoInput.value;
    newTodo.classList.add('todo-item');
    todoDiv.appendChild(newTodo);
    //check mark button
    const completedButton = document.createElement('button');
    completedButton.innerText = 'CHECK';
    completedButton.classList.add("complete-btn");
    todoDiv.appendChild(completedButton);
    //check trash button
    const trashButton = document.createElement('button');
    trashButton.innerText = 'DELETE';
    trashButton.classList.add("trash-btn");
    todoDiv.appendChild(trashButton);
    //button add user
    const addBtn = document.createElement('button');
    addBtn.innerText = '...';
    addBtn.classList.add("btn-light");
    const datatoggle = document.createAttribute("data-toggle");
    datatoggle.value="modal";
    const datatarget = document.createAttribute("data-target");
    datatarget.value = "#myModal";
    addBtn.setAttributeNode(datatoggle);
    addBtn.setAttributeNode(datatarget);
    todoDiv.appendChild(addBtn);
     //create modal
     /* const modalDiv = document.createElement("div");
     const idModal = document.createAttribute("id");
     idModal.value = "myModal";
     modalDiv.classList.add("modal");
     modalDiv.setAttributeNode(idModal);
     const modalDiv1 = document.createElement("div");
    modalDiv1.classList.add("modal-content");
    const inputmail = document.createElement("input");

    modalDiv1.appendChild(inputmail);
     modalDiv.appendChild(modalDiv1);
     todoDiv.appendChild(modalDiv); */
    //append to list
    todoList.appendChild(todoDiv);
    todoInput.value = "";
 
}




function addTableTodo(event){

//add form
const todoForm = document.createElement("form");
todoForm.classList.add("table-todo");
//tao input

const inputnewTodo = document.createElement("input");
inputnewTodo.classList.add('todo-input');
todoForm.appendChild(inputnewTodo);
//button
const addtask = document.createElement('button');
addtask.innerText ='<i class="fas fa-plus-square"></i>';
addtask.classList.add('todo-button');
todoForm.appendChild(addtask);
} 
function deleteCheck(event){
 
    const item = event.target;
    //delete
    if(item.classList[0]=== "trash-btn")
    {
        const todo = item.parentElement;
        //animation
        todo.classList.add("fall")
        /* todo.remove(); */
        todo.addEventListener('transitionend',function(){
            todo.remove();
        })
    }
    //check mark
    if(item.classList[0]=== "complete-btn"){
        const todo = item.parentElement;
        todo.classList.toggle("completed");
    }
}
function deleteCheck_Inprocess(event){
 
    const item = event.target;
    
    if(item.classList[0]=== "trash-btn")
    {
        const todo = item.parentElement;
     
        todo.classList.add("fall")
        
        todo.addEventListener('transitionend',function(){
            todo.remove();
        })
    }
    
    if(item.classList[0]=== "complete-btn"){
        const todo = item.parentElement;
        todo.classList.toggle("completed");
    }
}
function deleteCheck_Handle(event){
 
    const item = event.target;
    
    if(item.classList[0]=== "trash-btn")
    {
        const todo = item.parentElement;
    
        todo.classList.add("fall")
        
        todo.addEventListener('transitionend',function(){
            todo.remove();
        })
    }

    if(item.classList[0]=== "complete-btn"){
        const todo = item.parentElement;
        todo.classList.toggle("completed");
    }
}
function deleteCheck_Finish(event){
 
    const item = event.target;
    
    if(item.classList[0]=== "trash-btn")
    {
        const todo = item.parentElement;
       
        todo.classList.add("fall")
    
        todo.addEventListener('transitionend',function(){
            todo.remove();
        })
    }
   
    if(item.classList[0]=== "complete-btn"){
        const todo = item.parentElement;
        todo.classList.toggle("completed");
    }
}
// lay du lieu dua len kho
/* function saveLocalTodos(todo){
    let todos;
    if(localStorage.getItem("todos"===null)){
        todos = [];
    }else{
        todos = JSON.parse(localStorage.getItem("todos"));
    }
    todos.push(todo);
    localStorage.setItem("todos", JSON.stringify(todos));
    todos.forEach(element => {
        
    });
} */

function allowDrop(ev) {
    ev.preventDefault();
  }
  
  function drag(ev) {
    ev.dataTransfer.setData("text", ev.target.id);
  }
  
  function drop(ev) {
    ev.preventDefault();
    var data = ev.dataTransfer.getData("text");
    ev.target.appendChild(document.getElementById(data));
  }


  
    // lấy phần Modal
    var modal = document.getElementById('myModal');
  
    // Lấy phần button mở Modal
    var btn = document.getElementById("myBtn");
  
    // Lấy phần span đóng Modal
    var span = document.getElementsByClassName("close")[0];
  
    // Khi button được click thi mở Modal
    if(btn)
    btn.onclick = function() {
        modal.style.display = "block";
    }
  
    // Khi span được click thì đóng Modal
    span.onclick = function() {
        modal.style.display = "none";
    }
  
    // Khi click ngoài Modal thì đóng Modal
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }

</script>
